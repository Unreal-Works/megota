!function(r){"use strict";function t(r,e,t){var n;if(void 0===e&&(e=1e-10),void 0===t&&(t=!0),!Number.isFinite(r))return r;if(t){if(0===r)return r;if(1===r)return u;n=r<10?0:Math.log(r)-Math.log(Math.log(r))}else{if(0===r)return-1/0;n=r<=-.1?-2:Math.log(-r)-Math.log(-Math.log(-r))}for(var a=0;a<100;++a){var i=(r*Math.exp(-n)+n*n)/(n+1);if(Math.abs(i-n)<e*Math.abs(i))return i;n=i}throw Error("Iteration failed to converge: "+r)}function n(r,e,t){var n;if(void 0===e&&(e=1e-10),void 0===t&&(t=!0),!(r=new g(r)).isFinite())return r;if(t){if(r.eq(g.ZERO))return r;if(r.eq(g.ONE))return new g(u);n=g.ln(r)}else{if(r.eq(g.ZERO))return g.NEGATIVE_INFINITY.clone();n=g.ln(r.neg())}for(var a=0;a<100;++a){var i=n.neg().exp(),i=n.sub(r.mul(i)),o=n.add(g.ONE).sub(n.add(2).mul(i).div(g.mul(2,n).add(2)));if(o.eq(g.ZERO))return n;i=n.sub(i.div(o));if(g.abs(i.sub(n)).lt(g.abs(i).mul(e)))return i;n=i}throw Error("Iteration failed to converge: "+r)}function h(r,e){var e=e+1,t=Math.ceil(Math.log10(Math.abs(r))),r=(t<100&&(t=0),Math.round(r*Math.pow(10,e-t))*Math.pow(10,t-e));return parseFloat(r.toFixed(Math.max(e-t,0)))}function c(r){return Math.log10(Number(r.substring(0,17)))+(r.length-17)}var g={maxOps:1e3,serializeMode:0,debug:0},y="[MegotaNumError] ",E=y+"Invalid argument: ",N=/^[-\+]*(Infinity|NaN|(N+|N\^\d+ )?(10(\^+|\{(?!0,0)(\d*,)?\d*\})|\(10(\^+|\{(?!0,0)(\d*,)?\d*\})\)\^[1-9]\d* )*((\d+(\.\d*)?|\d*\.\d+)?([Ee][-\+]*))*(0|\d+(\.\d*)?|\d*\.\d+))$/,p=9007199254740991,m=Math.log10(p),o={},s={},a={ZERO:0,ONE:1},l=(a.E=Math.E,a.LN2=Math.LN2,a.LN10=Math.LN10,a.LOG2E=Math.LOG2E,a.LOG10E=Math.LOG10E,a.PI=Math.PI,a.SQRT1_2=Math.SQRT1_2,a.SQRT2=Math.SQRT2,a.MAX_SAFE_INTEGER=p,a.MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER,a.NaN=Number.NaN,a.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,a.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,a.E_MAX_SAFE_INTEGER="e"+p,a.EE_MAX_SAFE_INTEGER="ee"+p,a.TETRATED_MAX_SAFE_INTEGER="10^^"+p,a.GRAHAMS_NUMBER="J^63 10^^^(10^)^7625597484984 3638334640023.7783",a.GENERAL="N10",o.absoluteValue=o.abs=function(){var r=this.clone();return r.sign=1,r},s.absoluteValue=s.abs=function(r){return new g(r).abs()},o.negate=o.neg=function(){var r=this.clone();return r.sign=-1*r.sign,r},s.negate=s.neg=function(r){return new g(r).neg()},o.compareTo=o.cmp=function(r){if(r instanceof g||(r=new g(r)),isNaN(this.array[0][2])||isNaN(r.array[0][2]))return NaN;if(this.array[0][2]==1/0&&r.array[0][2]!=1/0)return this.sign;if(this.array[0][2]!=1/0&&r.array[0][2]==1/0)return-r.sign;if(1==this.array.length&&0===this.array[0][2]&&1==r.array.length&&0===r.array[0][2])return 0;if(this.sign!=r.sign)return this.sign;var e,t=this.sign;if(this.layer>r.layer)e=1;else if(this.layer<r.layer)e=-1;else{for(var n,a,i=0,o=Math.min(this.array.length,r.array.length);i<o;++i){if(n=this.array[this.array.length-1-i],a=r.array[r.array.length-1-i],n[0]>a[0]||n[0]==a[0]&&a[1]<n[1]||n[1]==a[1]&&a[2]<n[2]){e=1;break}if(n[0]<a[0]||n[0]==a[0]&&n[1]<a[1]||n[1]==a[1]&&n[2]<a[2]){e=-1;break}}void 0===e&&(e=this.array.length==r.array.length?0:this.array.length>r.array.length?1<=(n=this.array[this.array.length-o])[0]||10<n[1]?1:-1:1<=(n=r.array[r.array.length-o])[0]||10<n[1]?-1:1)}return e*t},s.compare=s.cmp=function(r,e){return new g(r).cmp(e)},o.greaterThan=o.gt=function(r){return 0<this.cmp(r)},s.greaterThan=s.gt=function(r,e){return new g(r).gt(e)},o.greaterThanOrEqualTo=o.gte=function(r){return 0<=this.cmp(r)},s.greaterThanOrEqualTo=s.gte=function(r,e){return new g(r).gte(e)},o.lessThan=o.lt=function(r){return this.cmp(r)<0},s.lessThan=s.lt=function(r,e){return new g(r).lt(e)},o.lessThanOrEqualTo=o.lte=function(r){return this.cmp(r)<=0},s.lessThanOrEqualTo=s.lte=function(r,e){return new g(r).lte(e)},o.equalsTo=o.equal=o.eq=function(r){return 0===this.cmp(r)},s.equalsTo=s.equal=s.eq=function(r,e){return new g(r).eq(e)},o.notEqualsTo=o.notEqual=o.neq=function(r){return 0!==this.cmp(r)},s.notEqualsTo=s.notEqual=s.neq=function(r,e){return new g(r).neq(e)},o.minimum=o.min=function(r){return this.lt(r)?this.clone():new g(r)},s.minimum=s.min=function(r,e){return new g(r).min(e)},o.maximum=o.max=function(r){return this.gt(r)?this.clone():new g(r)},s.maximum=s.max=function(r,e){return new g(r).max(e)},o.compareTo_tolerance=o.cmp_tolerance=function(r,e){return r instanceof g||(r=new g(r)),this.eq_tolerance(r,e)?0:this.cmp(r)},s.compare_tolerance=s.cmp_tolerance=function(r,e,t){return new g(r).cmp_tolerance(e,t)},o.greaterThan_tolerance=o.gt_tolerance=function(r,e){return r instanceof g||(r=new g(r)),!this.eq_tolerance(r,e)&&this.gt(r)},s.greaterThan_tolerance=s.gt_tolerance=function(r,e,t){return new g(r).gt_tolerance(e,t)},o.greaterThanOrEqualTo_tolerance=o.gte_tolerance=function(r,e){return r instanceof g||(r=new g(r)),this.eq_tolerance(r,e)||this.gt(r)},s.greaterThanOrEqualTo_tolerance=s.gte_tolerance=function(r,e,t){return new g(r).gte_tolerance(e,t)},o.lessThan_tolerance=o.lt_tolerance=function(r,e){return r instanceof g||(r=new g(r)),!this.eq_tolerance(r,e)&&this.lt(r)},s.lessThan_tolerance=s.lt_tolerance=function(r,e,t){return new g(r).lt_tolerance(e,t)},o.lessThanOrEqualTo_tolerance=o.lte_tolerance=function(r,e){return r instanceof g||(r=new g(r)),this.eq_tolerance(r,e)||this.lt(r)},s.lessThanOrEqualTo_tolerance=s.lte_tolerance=function(r,e,t){return new g(r).lte_tolerance(e,t)},o.equalsTo_tolerance=o.equal_tolerance=o.eq_tolerance=function(r,e){if(r instanceof g||(r=new g(r)),null==e&&(e=1e-7),this.isNaN()||r.isNaN()||this.isFinite()!=r.isFinite())return!1;if(this.sign!=r.sign)return!1;if(1<Math.abs(this.layer-r.layer))return!1;var t,n;if(this.layer!=r.layer){if(o=this.layer>r.layer?(i=this,r):(i=r,this),2!=i.array.length||0!==i.array[0][0]||0!==i.array[0][1]||0!==i.array[1][1]||1!=i.array[1][1]||1!=i.array[1][2])return!1;t=i.array[0][2],n=10<=o.array[o.array.length-1][1]?Math.log10(o.array[o.array.length-1][1]+1):Math.log10(o.array[o.array.length-1][1])}else{if(1<Math.abs(this.array[this.array.length-1][1]-r.array[r.array.length-1][1]))return!1;for(var a=1;0<=Math.max(this.array.length,r.array.length)-a;++a){var i,o,s,l,u=this.array[this.array.length-a][1],h=r.array[r.array.length-a][1];if(u!=h)h<u?(i=this,o=r):(i=r,o=this,u=h),s=i.array[i.array.length-a][2],l=0;else if(o=r,s=(i=this).array[i.array.length-a][2],l=o.array[o.array.length-a][2],i.array.length-a==0){t=s,n=l;break}if(1<Math.abs(s-l))return!1;if(s!=l){if(!(i.array.length-a<2||i.array.length-a==2&&0===i.array[0][0]&&0===i.array[0][1]&&0===i.array[1][0]&&1==i.array[1][1]&&1==i.array[1][2]))return!1;t=i.array[0][2],n=1==u?Math.log10(o.operator([0,0])):2==u&&1e10<=o.operator([0,0])?Math.log10(o.operator([0,1])+2):10<=o.operator([0,u-2])?Math.log10(o.operator([0,u-1])+1):Math.log10(o.operator([0,u-1]));break}}}return Math.abs(t-n)<=e*Math.max(Math.abs(t),Math.abs(n))},s.equalsTo_tolerance=s.equal_tolerance=s.eq_tolerance=function(r,e,t){return new g(r).eq_tolerance(e,t)},o.notEqualsTo_tolerance=o.notEqual_tolerance=o.neq_tolerance=function(r,e){return!this.eq_tolerance(r,e)},s.notEqualsTo_tolerance=s.notEqual_tolerance=s.neq_tolerance=function(r,e,t){return new g(r).neq_tolerance(e,t)},o.isPositive=o.ispos=function(){return this.gt(g.ZERO)},s.isPositive=s.ispos=function(r){return new g(r).ispos()},o.isNegative=o.isneg=function(){return this.lt(g.ZERO)},s.isNegative=s.isneg=function(r){return new g(r).isneg()},o.isNaN=function(){return isNaN(this.array[0][2])},s.isNaN=function(r){return new g(r).isNaN()},o.isFinite=function(){return isFinite(this.array[0][2])},s.isFinite=function(r){return new g(r).isFinite()},o.isInfinite=function(){return this.array[0][2]==1/0},s.isInfinite=function(r){return new g(r).isInfinite()},o.isInteger=o.isint=function(){return-1==this.sign?this.abs().isint():!!this.gt(g.MAX_SAFE_INTEGER)||Number.isInteger(this.toNumber())},s.isInteger=s.isint=function(r){return new g(r).isint()},o.floor=function(){return this.isInteger()?this.clone():new g(Math.floor(this.toNumber()))},s.floor=function(r){return new g(r).floor()},o.ceiling=o.ceil=function(){return this.isInteger()?this.clone():new g(Math.ceil(this.toNumber()))},s.ceiling=s.ceil=function(r){return new g(r).ceil()},o.round=function(){return this.isInteger()?this.clone():new g(Math.round(this.toNumber()))},!(s.round=function(r){return new g(r).round()})),u=(o.plus=o.add=function(r){var e,t,n,a,i,o=this.clone();return r=new g(r),g.debug>=g.NORMAL&&(console.log(this+"+"+r),l||(console.warn(y+"Debug output via 'debug' is being deprecated and will be removed in the future!"),l=!0)),-1==o.sign?o.neg().add(r.neg()).neg():-1==r.sign?o.sub(r.neg()):o.eq(g.ZERO)?r:r.eq(g.ZERO)?o:o.isNaN()||r.isNaN()||o.isInfinite()&&r.isInfinite()&&o.eq(r.neg())?g.NaN.clone():o.isInfinite()?o:r.isInfinite()?r:(e=o.min(r),n=(t=o.max(r)).operator([0,0]),a=t.operator([0,1]),t.gt(g.E_MAX_SAFE_INTEGER)||t.div(e).gt(g.MAX_SAFE_INTEGER)?i=t:a?1==a&&(a=e.operator([0,1])?e.operator([0,0]):Math.log10(e.operator([0,0])),i=new g([a+Math.log10(Math.pow(10,n-a)+1),1])):i=new g(o.toNumber()+r.toNumber()),e=t=null,i)},s.plus=s.add=function(r,e){return new g(r).add(e)},o.minus=o.sub=function(r){var e,t,n,a,i,o,s=this.clone();return r=new g(r),g.debug>=g.NORMAL&&console.log(s+"-"+r),-1==s.sign?s.neg().sub(r.neg()).neg():-1==r.sign?s.add(r.neg()):s.eq(r)?g.ZERO.clone():r.eq(g.ZERO)?s:s.isNaN()||r.isNaN()||s.isInfinite()&&r.isInfinite()?g.NaN.clone():s.isInfinite()?s:r.isInfinite()?r.neg():(e=s.min(r),t=s.max(r),n=r.gt(s),a=t.operator([0,0]),i=t.operator([0,1]),t.gt(g.E_MAX_SAFE_INTEGER)||t.div(e).gt(g.MAX_SAFE_INTEGER)?(o=t,o=n?o.neg():o):i?1==i&&(i=e.operator([0,1])?e.operator([0,0]):Math.log10(e.operator([0,0])),o=new g([i+Math.log10(Math.pow(10,a-i)-1),1]),o=n?o.neg():o):o=new g(s.toNumber()-r.toNumber()),e=t=null,o)},s.minus=s.sub=function(r,e){return new g(r).sub(e)},o.times=o.mul=function(r){var e,t=this.clone();return r=new g(r),g.debug>=g.NORMAL&&console.log(t+"*"+r),t.sign*r.sign==-1?t.abs().mul(r.abs()).neg():-1==t.sign?t.abs().mul(r.abs()):t.isNaN()||r.isNaN()||t.eq(g.ZERO)&&r.isInfinite()||t.isInfinite()&&r.abs().eq(g.ZERO)?g.NaN.clone():r.eq(g.ZERO)?g.ZERO.clone():r.eq(g.ONE)?t.clone():t.isInfinite()?t:r.isInfinite()?r:t.max(r).gt(g.EE_MAX_SAFE_INTEGER)?t.max(r):(e=t.toNumber()*r.toNumber())<=p?new g(e):g.pow(10,t.log10().add(r.log10()))},s.times=s.mul=function(r,e){return new g(r).mul(e)},o.divide=o.div=function(r){var e,t=this.clone();return r=new g(r),g.debug>=g.NORMAL&&console.log(t+"/"+r),t.sign*r.sign==-1?t.abs().div(r.abs()).neg():-1==t.sign?t.abs().div(r.abs()):t.isNaN()||r.isNaN()||t.isInfinite()&&r.isInfinite()||t.eq(g.ZERO)&&r.eq(g.ZERO)?g.NaN.clone():r.eq(g.ZERO)?g.POSITIVE_INFINITY.clone():r.eq(g.ONE)?t.clone():t.eq(r)?g.ONE.clone():t.isInfinite()?t:r.isInfinite()?g.ZERO.clone():t.max(r).gt(g.EE_MAX_SAFE_INTEGER)?(t.gt(r)?t:g.ZERO).clone():(e=t.toNumber()/r.toNumber())<=p?new g(e):(t=(e=g.pow(10,t.log10().sub(r.log10()))).floor(),e.sub(t).lt(new g(1e-9))?t:e)},s.divide=s.div=function(r,e){return new g(r).div(e)},o.reciprocate=o.rec=function(){return g.debug>=g.NORMAL&&console.log(this+"^-1"),this.isNaN()||this.eq(g.ZERO)?g.NaN.clone():this.abs().gt("2e323")?g.ZERO.clone():new g(1/this)},s.reciprocate=s.rec=function(r){return new g(r).rec()},o.modular=o.mod=function(r){return(r=new g(r)).eq(g.ZERO)?g.ZERO.clone():this.sign*r.sign==-1?this.abs().mod(r.abs()).neg():-1==this.sign?this.abs().mod(r.abs()):this.sub(this.div(r).floor().mul(r))},s.modular=s.mod=function(r,e){return new g(r).mod(e)},o.gamma=function(){var r,e,t,n=this.clone();return n.gt(g.TETRATED_MAX_SAFE_INTEGER)?n:n.gt(g.E_MAX_SAFE_INTEGER)?g.exp(n):n.gt(g.MAX_SAFE_INTEGER)?g.exp(g.mul(n,g.ln(n).sub(1))):1<(r=n.operator([0,0]))?r<24?new g(function(r){if(!isFinite(r))return r;if(r<-50)return r==Math.trunc(r)?Number.NEGATIVE_INFINITY:0;for(var e=1;r<10;)e*=r,++r;var t=--r*r,n=r,a=(a=(a=(a=(a=(a=.9189385332046727)+(r+.5)*Math.log(r)-r)+1/(12*n)-1/(360*(n*=t)))+1/(1260*(n*=n*t))-1/(1680*(n*=t)))+1/(1188*(n*=t))-691/(360360*(n*=t)))+7/(1092*(n*=t))-3617/(122400*(n*=t));return Math.exp(a)/e}(n.sign*r)):(r=(n=r-1)*n,(n=(t=(t=.9189385332046727)+(.5+(e=n))*Math.log(n)-n)+1/(12*e))!=t&&(n=(t=n)-1/(360*(e*=r)))!=t&&(t=(t=n)+1/(1260*(e*=r))-1/(1680*(e*=r))),g.exp(t)):this.rec()},s.gamma=function(r){return new g(r).gamma()},s.factorials=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,0x1b02b9306890000,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8.841761993739702e30,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,1.0333147966386145e40,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,1.3868311854568984e80,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8.247650592082472e90,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,1.1978571669969892e100,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5.797126020747368e120,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,2.4227095383672734e130,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1.352001527678403e140,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,1.1462805637347084e170,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,1.7629525510902446e180,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3.393108684451898e190,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8.094298525273444e200,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,2.6904727073180504e230,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,3.80892263763057e260,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1.853271869493735e280,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1.503616514864999e300,25260757449731984e286,4269068009004705e289,7257415615307999e291],o.factorial=o.fact=function(){var r=this.clone(),e=g.factorials;return r.lt(g.ZERO)||!r.isint()?r.add(1).gamma():r.lte(170)?new g(e[+r]):((e=+r)<500&&(e+=163879/209018880*Math.pow(e,5)),e<1e3&&(e+=-571/2488320*Math.pow(e,4)),e<5e4&&(e+=-139/51840*Math.pow(e,3)),e<1e7&&(e+=1/288*Math.pow(e,2)),e<1e20&&(e+=1/12*e),r.div(g.E).pow(r).mul(r.mul(g.PI).mul(2).sqrt()).times(1))},s.factorial=s.fact=function(r){return new g(r).fact()},o.toPower=o.pow=function(r){var e;return r=new g(r),g.debug>=g.NORMAL&&console.log(this+"^"+r),r.eq(g.ZERO)?g.ONE.clone():r.eq(g.ONE)?this.clone():r.lt(g.ZERO)?this.pow(r.neg()).rec():this.lt(g.ZERO)&&r.isint()?r.mod(2).lt(g.ONE)?this.abs().pow(r):this.abs().pow(r).neg():this.lt(g.ZERO)?g.NaN.clone():this.eq(g.ONE)?g.ONE.clone():this.eq(g.ZERO)?g.ZERO.clone():this.max(r).gt(g.TETRATED_MAX_SAFE_INTEGER)?this.max(r):this.eq(10)?r.gt(g.ZERO)?(r.operator([0,1],r.operator([0,1])+1||1),r.normalize(),r):new g(Math.pow(10,r.toNumber())):r.lt(g.ONE)?this.root(r.rec()):(e=Math.pow(this.toNumber(),r.toNumber()))<=p?new g(e):g.pow(10,this.log10().mul(r))},s.toPower=s.pow=function(r,e){return new g(r).pow(e)},o.exponential=o.exp=function(){return g.pow(Math.E,this)},s.exponential=s.exp=function(r){return g.pow(Math.E,r)},o.squareRoot=o.sqrt=function(){return this.root(2)},s.squareRoot=s.sqrt=function(r){return new g(r).root(2)},o.cubeRoot=o.cbrt=function(){return this.root(3)},s.cubeRoot=s.cbrt=function(r){return new g(r).root(3)},o.root=function(r){return r=new g(r),g.debug>=g.NORMAL&&console.log(this+"root"+r),r.eq(g.ONE)?this.clone():r.lt(g.ZERO)?this.root(r.neg()).rec():r.lt(g.ONE)?this.pow(r.rec()):this.lt(g.ZERO)&&r.isint()&&r.mod(2).eq(g.ONE)?this.neg().root(r).neg():this.lt(g.ZERO)?g.NaN.clone():this.eq(g.ONE)?g.ONE.clone():this.eq(g.ZERO)?g.ZERO.clone():this.max(r).gt(g.TETRATED_MAX_SAFE_INTEGER)?(this.gt(r)?this:g.ZERO).clone():g.pow(10,this.log10().div(r))},s.root=function(r,e){return new g(r).root(e)},o.generalLogarithm=o.log10=function(){var r=this.clone();return g.debug>=g.NORMAL&&console.log("log"+this),r.lt(g.ZERO)?g.NaN.clone():r.eq(g.ZERO)?g.NEGATIVE_INFINITY.clone():r.lte(g.MAX_SAFE_INTEGER)?new g(Math.log10(r.toNumber())):!r.isFinite()||r.gt(g.TETRATED_MAX_SAFE_INTEGER)?r:(r.operator([0,1],r.operator([0,1])-1),r.normalize())},s.generalLogarithm=s.log10=function(r){return new g(r).log10()},o.logarithm=o.logBase=function(r){return void 0===r&&(r=Math.E),this.log10().div(g.log10(r))},s.logarithm=s.logBase=function(r,e){return new g(r).logBase(e)},o.naturalLogarithm=o.log=o.ln=function(){return this.logBase(Math.E)},s.naturalLogarithm=s.log=s.ln=function(r){return new g(r).ln()},.5671432904097838),e=(o.lambertw=function(r){void 0===r&&(r=!0);var e=this.clone();return e.isNaN()?e:e.lt(-.3678794411710499)?g.NaN.clone():r?e.gt(g.TETRATED_MAX_SAFE_INTEGER)?e:e.gt(g.EE_MAX_SAFE_INTEGER)?(e.operator([0,1],e.operator([0,1])-1),e):e.gt(g.MAX_SAFE_INTEGER)?n(e):new g(t(e.sign*e.operator([0,0]))):e.ispos()?g.NaN.clone():e.abs().gt(g.EE_MAX_SAFE_INTEGER)?e.neg().recip().lambertw().neg():e.abs().gt(g.MAX_SAFE_INTEGER)?n(e,1e-10,!1):new g(t(e.sign*e.operator([0,0]),1e-10,!1))},s.lambertw=function(r,e){return new g(r).lambertw(e)},o.tetrate=o.tetr=function(r,e){void 0===e&&(e=g.ONE);var t=this.clone();if(r=new g(r),(e=new g(e)).neq(g.ONE)&&(r=r.add(e.slog(t))),g.debug>=g.NORMAL&&console.log(t+"^^"+r),t.isNaN()||r.isNaN()||e.isNaN())return g.NaN.clone();if(r.isInfinite()&&0<r.sign)return t.gte(Math.exp(1/Math.E))?g.POSITIVE_INFINITY.clone():(n=t.ln().neg()).lambertw().div(n);if(r.lte(-2))return g.NaN.clone();if(t.eq(g.ZERO))return(r.eq(g.ZERO)?g.NaN:r.mod(2).eq(g.ZERO)?g.ZERO:g.ONE).clone();if(t.eq(g.ONE))return(r.eq(g.ONE.neg())?g.NaN:g.ONE).clone();if(r.eq(g.ONE.neg()))return g.ZERO.clone();if(r.eq(g.ZERO))return g.ONE.clone();if(r.eq(g.ONE))return t;if(r.eq(2))return t.pow(t);if(t.eq(2)){if(r.eq(3))return new g(16);if(r.eq(4))return new g(65536)}var e=t.max(r);if(e.gt("10^^^"+p))return e;if(e.gt(g.TETRATED_MAX_SAFE_INTEGER)||r.gt(g.MAX_SAFE_INTEGER))return this.lt(Math.exp(1/Math.E))?(n=t.ln().neg()).lambertw().div(n):((e=t.slog(10).add(r)).operator([0,2],(e.operator([0,2])||0)+1),e.normalize(),e);for(var n=r.toNumber(),a=Math.floor(n),i=t.pow(n-a),o=g.NaN,s=0,l=new g(g.E_MAX_SAFE_INTEGER);0!==a&&i.lt(l)&&s<100;++s)if(0<a){if(i=t.pow(i),o.eq(i)){a=0;break}o=i,--a}else{if(i=i.logBase(t),o.eq(i)){a=0;break}o=i,++a}return 100!=s&&!this.lt(Math.exp(1/Math.E))||(a=0),i.operator([0,1],i.operator([0,1])+a||a),i.normalize(),i},s.tetrate=s.tetr=function(r,e,t){return new g(r).tetr(e,t)},o.iteratedexp=function(r,e){return this.tetr(r,e)},s.iteratedexp=function(r,e,t){return new g(r).iteratedexp(e,t)},o.iteratedlog=function(r,e){void 0===r&&(r=10),void 0===e&&(e=g.ONE.clone());var t=this.clone();return r=new g(r),(e=new g(e)).eq(g.ZERO)?t:e.eq(g.ONE)?t.logBase(r):r.tetr(t.slog(r).sub(e))},s.iteratedlog=function(r,e,t){return new g(r).iteratedlog(e,t)},o.layeradd=function(r,e){void 0===e&&(e=10),void 0===r&&(r=g.ONE.clone());var t=this.clone();return e=new g(e),r=new g(r),e.tetr(t.slog(e).add(r))},s.layeradd=function(r,e,t){return new g(r).layeradd(e,t)},o.layeradd10=function(r){return this.layeradd(r)},s.layeradd10=function(r,e){return new g(r).layeradd10(e)},o.ssqrt=o.ssrt=function(){var r=this.clone();return r.lt(Math.exp(-1/Math.E))?g.NaN.clone():!r.isFinite()||r.gt(g.TETRATED_MAX_SAFE_INTEGER)?r:r.gt(g.EE_MAX_SAFE_INTEGER)?(r.operator([0,1],r.operator([0,1])-1),r):(r=r.ln()).div(r.lambertw())},s.ssqrt=s.ssrt=function(r){return new g(r).ssqrt()},o.slog=function(r){void 0===r&&(r=10);var e=new g(this);if(r=new g(r),e.isNaN()||r.isNaN()||e.isInfinite()&&r.isInfinite())return g.NaN.clone();if(e.isInfinite())return e;if(r.isInfinite())return g.ZERO.clone();if(e.lt(g.ZERO))return g.ONE.neg();if(e.eq(g.ONE))return g.ZERO.clone();if(e.eq(r))return g.ONE.clone();if(r.lt(Math.exp(1/Math.E))){var t=g.tetr(r,1/0);if(e.eq(t))return g.POSITIVE_INFINITY.clone();if(e.gt(t))return g.NaN.clone()}if(e.max(r).gt("10^^^"+p))return e.gt(r)?e:g.ZERO.clone();if(e.max(r).gt(g.TETRATED_MAX_SAFE_INTEGER))return e.gt(r)?(e.operator([0,2],e.operator([0,2])-1),e.normalize(),e.sub(e.operator([0,1]))):g.ZERO.clone();var n=0,t=(e.operator([0,1])||0)-(r.operator([0,1])||0);3<t&&(n+=t=t-3,e.operator([0,1],e.operator([0,1])-t));for(var a=0;a<100;++a)if(e.lt(g.ZERO))e=g.pow(r,e),--n;else{if(e.lte(1))return new g(n+e.toNumber()-1);++n,e=g.logBase(e,r)}return e.gt(10)?new g(n):void 0},s.slog=function(r,e){return new g(r).slog(e)},o.pentate=o.pent=function(r){return this.arrow(3)(r)},s.pentate=s.pent=function(r,e){return g.arrow(r,3,e)},o.arrow=function(u){var h=this.clone();return!(u=new g(u)).isint()||u.lt(g.ZERO)?function(r){return g.NaN.clone()}:u.eq(g.ZERO)?function(r){return h.mul(r)}:u.eq(g.ONE)?function(r){return h.pow(r)}:u.eq(2)?function(r){return h.tetr(r)}:function(r){var e=2==arguments.length?arguments[1]:0;if(r=new g(r),g.debug>=g.NORMAL&&console.log(h+"{"+u+"}"+r),h.isNaN()||r.isNaN())return g.NaN.clone();if(r.lt(g.ZERO))return g.NaN.clone();if(h.eq(g.ZERO))return(r.eq(g.ONE)?g.ZERO:g.NaN).clone();if(h.eq(g.ONE))return g.ONE.clone();if(r.eq(g.ZERO))return g.ONE.clone();if(r.eq(g.ONE))return h.clone();if(u.gt(g.MAX_SAFE_INTEGER))(o=u.clone()).array.push([1,0,1]);else{var t=u.toNumber();if(r.eq(2))return h.arrow(t-1)(h,e+1);if(h.max(r).gt("10{"+(t+1)+"}"+p))return h.max(r);if(h.gt("10{"+t+"}"+p)||r.gt(g.MAX_SAFE_INTEGER))return h.gt("10{"+t+"}"+p)?((o=h.clone()).operator([0,t],o.operator([0,t])-1),o.normalize()):o=h.gt("10{"+(t-1)+"}"+p)?new g(h.operator([0,t-1])):g.ZERO,(n=o.add(r)).operator([0,t],(n.operator([0,t])||0)+1),n.normalize(),n;if(e>=g.maxOps+10)return new g([[0,0,10],[0,t,1]]);for(var n=r.toNumber(),a=Math.floor(n),i=u.sub(g.ONE),o=h.arrow(i)(n-a,e+1),s=0,l=new g("10{"+(t-1)+"}"+p);0!==a&&o.lt(l)&&s<100;++s)0<a&&(o=h.arrow(i)(o,e+1),--a);100==s&&(a=0),o.operator([0,t-1],o.operator([0,t-1])+a||a)}return o.normalize(),o}},o.chain=function(r,e){return this.arrow(e)(r)},s.arrow=function(r,e,t){return new g(r).arrow(e)(t)},s.chain=function(r,e,t){return new g(r).arrow(t)(e)},s.hyper=function(t){return(t=new g(t)).eq(g.ZERO)?function(r,e){return new g(e).eq(g.ZERO)?new g(r):new g(r).add(g.ONE)}:t.eq(g.ONE)?function(r,e){return g.add(r,e)}:function(r,e){return new g(r).arrow(t.sub(2))(e)}},o.expansion=function(e){var t,n=this.clone();if(e=new g(e),g.debug>=g.NORMAL&&console.log("{"+n+","+e+",1,2}"),e.lte(g.ZERO)||!e.isint())return g.NaN.clone();if(e.eq(g.ONE))return n.clone();if(!n.isint())return g.NaN.clone();if(n.eq(2))return new g(4);if(e.gt(g.MAX_SAFE_INTEGER))(t=e.clone()).operator([1,0],t.operator([1,0])+1);else{t=n;let r=e.toNumber()-1;for(var a=0;0!==r&&a<100;++a)0<r&&(t=n.arrow(t)(n),--r);t.array[t.array.length-1][2]+=r}return t.normalize(),t},s.expansion=function(r,e){return new g(r).expansion(e)},s.affordGeometricSeries=function(r,e,t,n){r=new g(r),e=new g(e),t=new g(t);e=e.mul(t.pow(n));return g.floor(r.div(e).mul(t.sub(g.ONE)).add(g.ONE).log10().div(t.log10()))},s.affordArithmeticSeries=function(r,e,t,n){r=new g(r),e=new g(e),t=new g(t),n=new g(n);e=e.add(n.mul(t)).sub(t.div(2)),n=e.pow(2);return e.neg().add(n.add(t.mul(r).mul(2)).sqrt()).div(t).floor()},s.sumGeometricSeries=function(r,e,t,n){return e=new g(e),t=new g(t),e.mul(t.pow(n)).mul(g.sub(g.ONE,t.pow(r))).div(g.sub(g.ONE,t))},s.sumArithmeticSeries=function(r,e,t,n){r=new g(r),e=new g(e),n=new g(n);e=e.add(n.mul(t));return r.div(2).mul(e.mul(2).plus(r.sub(g.ONE).mul(t)))},s.choose=function(r,e){return new g(r).factorial().div(new g(e).factorial().mul(new g(r).sub(new g(e)).factorial()))},o.choose=function(r){return g.choose(this,r)},!(o.normalize=function(){var r,e=this;if(g.debug>=g.ALL&&console.log(e.toString()),e.array&&e.array.length||(e.array=[[0,0,0]]),1!=e.sign&&-1!=e.sign&&("number"!=typeof e.sign&&(e.sign=Number(e.sign)),e.sign=e.sign<0?-1:1),p<e.layer)e.array=[[0,0,1/0]],e.layer=0;else{Number.isInteger(e.layer)&&(e.layer=Math.floor(e.layer));for(var t=0;t<e.array.length;++t){var n=e.array[t];if(null!==n[0]&&void 0!==n[0]||(n[0]=0),0===n[0]&&0===n[1]||0!==n[2]&&null!=n[2]){if(isNaN(n[0])||isNaN(n[1])||isNaN(n[2]))return e.array=[[0,0,NaN]],e;if(!isFinite(n[0])||!isFinite(n[1])||!isFinite(n[2]))return e.array=[[0,0,1/0]],e;Number.isInteger(n[0])||(n[0]=Math.floor(n[0])),Number.isInteger(n[1])||(n[1]=Math.floor(n[1])),0===n[0]&&0===n[1]||Number.isInteger(n[2])||(n[2]=Math.floor(n[2]))}else e.array.splice(t,1),--t}do{for(g.debug>=g.ALL&&console.log(e.toString()),r=!1,e.array.sort(function(r,e){return r[1]>e[1]?1:r[1]<e[1]?-1:0}),e.array.sort(function(r,e){return r[0]>e[0]?1:r[0]<e[0]?-1:0}),e.array.length>g.maxOps&&e.array.splice(0,e.array.length-g.maxOps),e.array.length||(e.array=[[0,0,0]]),e.array[e.array.length-1][0]>p?(e.layer++,e.array=[[0,0,e.array[e.array.length-1][0]]],r=!0):e.layer&&1==e.array.length&&0===e.array[0][0]&&0===e.array[0][1]&&(e.layer--,0===e.array[0][2]?e.array=[[0,0,10]]:e.array=[[0,0,10],[Math.round(e.array[0][2]),0,1]],r=!0),e.array.length<g.maxOps&&(0!==e.array[0][0]||0!==e.array[0][1])&&e.array.unshift([0,0,10]),t=0;t<e.array.length-1;++t)e.array[t][0]==e.array[t+1][0]&&e.array[t][1]==e.array[t+1][1]&&(e.array[t][2]+=e.array[t+1][2],e.array.splice(t+1,1),--t,r=!0);for(0===e.array[0][0]&&0===e.array[0][1]&&e.array[0][2]>p&&(2<=e.array.length&&0==e.array[1][0]&&1==e.array[1][1]?e.array[1][2]++:e.array.splice(1,0,[0,1,1]),e.array[0][2]=Math.log10(e.array[0][2]),r=!0);2<=e.array.length&&0===e.array[0][0]&&0===e.array[0][1]&&e.array[0][2]<m&&0==e.array[1][0]&&1==e.array[1][1]&&e.array[1][2];)e.array[0][2]=Math.pow(10,e.array[0][2]),1<e.array[1][2]?e.array[1][2]--:e.array.splice(1,1),r=!0;for(;2<=e.array.length&&0===e.array[0][0]&&0===e.array[0][1]&&1==e.array[0][2]&&e.array[1][2];)1<e.array[1][2]?e.array[1][2]--:e.array.splice(1,1),e.array[0][2]=10;for(2<=e.array.length&&0===e.array[0][0]&&0===e.array[0][1]&&(0<e.array[1][0]||1!=e.array[1][1])&&(e.array[0][2]?e.array.splice(1,0,[e.array[1][0],e.array[1][1]-1,e.array[0][2]]):e.array[0][2]&&e.array.splice(1,0,[e.array[1][0]-1,e.array[1][2],1]),(e.array[0][2]=1)<e.array[2][2]?e.array[2][2]--:e.array.splice(2,1),-1==e.array[1][1]&&(e.array[1]=[e.array[1][0]-1,e.array[1][2],1],e.array[0][2]=10),r=!0),t=1;t<e.array.length;++t)e.array[t][1]>p&&(t!=e.array.length-1&&e.array[t+1][0]==e.array[t][0]+1?e.array[t+1][0]++:(e.array.splice(t+1,0,[e.array[t][0]+1,0,1]),r=!0),0===e.array[0][0]&&0===e.array[0][1]?e.array[0][2]=e.array[t][1]+1:e.array.splice(0,0,[0,0,e.array[t][1]+1]),e.array.splice(1,t),r=!0),e.array[t][2]>p&&(t!=e.array.length-1&&e.array[t+1][0]==e.array[t][0]+1?e.array[t+1][2]++:e.array.splice(t+1,0,[e.array[t][0],e.array[t][1]+1,1]),0===e.array[0][0]&&0===e.array[0][1]?e.array[0][2]=e.array[t][2]+1:e.array.splice(0,0,[0,0,e.array[t][2]+1]),e.array.splice(1,t),r=!0)}while(r);e.array.length||(e.array=[[0,0,0]])}return e}));o.standardize=function(){return e||(console.warn(y+"'standardize' method is being deprecated in favor of 'normalize' and will be removed in the future!"),e=!0),this.normalize()},o.toNumber=function(){return-1==this.sign?-this.abs().toNumber():this.gt(Number.MAX_VALUE)?1/0:2<=this.array.length&&1==this.array[1][2]?Math.pow(10,this.array[0][2]):this.array[0][2]},o.toString=function(){if(-1==this.sign)return"-"+this.abs();if(isNaN(this.array[0][2]))return"NaN";if(!isFinite(this.array[0][2]))return"Infinity";var r="";if(this.layer?this.layer<3?r+="N".repeat(this.layer):r+="N^"+this.layer+" ":r+="",3<=this.array.length||2==this.array.length&&(0<this.array[1][0]||2<=this.array[1][1]))for(var e=this.array.length-1;2<=e;--e){var t=this.array[e],n=0<t[0]||5<=t[1]?`{${t[0]?t[0]+",":""}${t[1]}}`:"^".repeat(t[1]);r+=t[2]<5?("10"+n).repeat(t[2]):"(10"+n+")^"+t[2]+" "}var a=this.operator([0,0]),i=this.operator([0,1]);return r+=i?i<3?"e".repeat(i-1)+Math.pow(10,a-Math.floor(a))+"e"+Math.floor(a):i<8?"e".repeat(i)+a:"(10^)^"+i+" "+a:String(a)},o.toStringWithDecimalPlaces=function(r,e){if(-1==this.sign)return"-"+this.abs();if(isNaN(this.array[0][1]))return"NaN";if(!isFinite(this.array[0][1]))return"Infinity";var t=0,n="",a=Math.pow(10,r);if(this.layer?this.layer<3?n+="J".repeat(this.layer):n+="J^"+this.layer+" ":n+="",3<=this.array.length||2==this.array.length&&2<=this.array[1][0])for(var i=this.array.length-1;!t&&2<=i;--i){var o=this.array[i],s=o[0],o=o[1],s=(e&&a<=o?(++s,t=o,o=1):e&&this.array[i-1][0]==s-1&&this.array[i-1][1]>=a&&(++o,t=this.array[i-1][1]),5<=s?"{"+s+"}":"^".repeat(s));1<o?n+="(10"+s+")^"+o+" ":1==o&&(n+="10"+s)}var l=this.operator([0,0]),u=this.operator([0,1]);return a<l&&(l=Math.log10(l),++u),n+=t?h(t,r):u?u<3?"e".repeat(u-1)+h(Math.pow(10,l-Math.floor(l)),r)+"e"+h(Math.floor(l),r):u<8?"e".repeat(u)+h(l,r):e?"(10^)^"+h(u,r)+" "+h(l,r):"(10^)^"+u+" "+h(l,r):String(h(l,r))},o.toExponential=function(r,e){return 1==this.array.length?(this.sign*this.array[0][1]).toExponential(r):this.toStringWithDecimalPlaces(r,e)},o.toFixed=function(r,e){return 1==this.array.length?(this.sign*this.array[0][1]).toFixed(r):this.toStringWithDecimalPlaces(r,e)},o.toPrecision=function(r,e){return 0===this.array[0][1]?(this.sign*this.array[0][1]).toFixed(r-1,e):!(1==this.array.length&&this.array[0][1]<1e-6)&&1==this.array.length&&r>Math.log10(this.array[0][1])?this.toFixed(r-Math.floor(Math.log10(this.array[0][1]))-1,e):this.toExponential(r-1,e)},o.valueOf=function(){return this.toString()},o.toJSON=function(){if(g.serializeMode==g.JSON){for(var r=[],e=0;e<this.array.length;++e)r.push([this.array[e][0],this.array[e][1]]);return{array:r,layer:this.layer,sign:this.sign}}if(g.serializeMode==g.STRING)return this.toString()},s.fromNumber=function(r){if("number"!=typeof r)throw Error(E+"Expected Number");var e=new g;return e.array[0][2]=Math.abs(r),e.sign=r<0?-1:1,e.normalize(),e},s.fromBigInt=function(r){if("bigint"!=typeof r)throw Error(E+"Expected BigInt");var e=new g,t=r<BigInt(0)?-r:r;return e.sign=r<BigInt(0)?-1:1,t<=p?e.array[0][1]=Number(t):e.array=[[0,function(r){for(var e=BigInt(64);r>=BigInt(1)<<e;)e*=BigInt(2);for(var t=e/BigInt(2);t>BigInt(0);)r>=BigInt(1)<<e?e+=t:e-=t,t/=BigInt(2);var n=e-BigInt(54);return Math.log10(Number(r>>n))+Math.LOG10E/Math.LOG2E*Number(n)}(t)],[1,1]],e.normalize(),e};function f(r){if(!r||"object"!=typeof r)throw Error(y+"Object expected");for(var e,t,n=["maxOps",1,Number.MAX_SAFE_INTEGER,"serializeMode",0,1,"debug",0,2],a=0;a<n.length;a+=3)if(void 0!==(t=r[e=n[a]])){if(!(Math.floor(t)===t&&n[a+1]<=t&&t<=n[a+2]))throw Error(E+e+": "+t);this[e]=t}return this}s.fromString=function(r){if("string"!=typeof r)throw Error(E+"Expected String");var e=!1;if("string"==typeof r&&("["==r[0]||"{"==r[0]))try{JSON.parse(r)}finally{e=!0}if(e)return g.fromJSON(r);var t=new g,e=(t.array=[[0,0,0]],r);if(r=(r=r.replaceAll("J^","(10{1,0})^")).replaceAll("J","10{1,0}"),N.test(r)){var n,a,i,o,s,l=!1;if("-"!=r[0]&&"+"!=r[0]||(n=r.search(/[^-\+]/),l=r.substring(0,n).match(/-/g).length%2==1,r=r.substring(n)),"NaN"==r)t.array=[[0,0,NaN]];else if("Infinity"==r)t.array=[[0,0,1/0]];else{for("N"==r[0]&&(r="^"==r[1]?(a=r.substring(2).search(/[^0-9]/)+2,t.layer=Number(r.substring(2,a)),r.substring(a+1)):(a=r.search(/[^N]/),t.layer=a,r.substring(a)));r&&/^\(?10[\^\{]/.test(r);){var u,h="^"==(r="("==r[0]?r.substring(1):r)[2]?(u=[0,a=r.substring(2).search(/[^\^]/)],a+2):(a=r.indexOf("}"),1==(u=r.substring(3,a).split(",").map(r=>parseInt(r))).length&&u.unshift(0),a+1);")"==(r=r.substring(h))[0]?(a=r.indexOf(" "),i=Number(r.substring(2,a)),r=r.substring(a+1)):i=1,0==u[0]&&1==u[1]?2<=t.array.length&&0==t.array[1][0]&&1==t.array[1][1]?t.array[1][2]+=i:t.array.splice(1,0,[0,1,i]):0==u[0]&&2==u[1]?(a=2<=t.array.length&&0==t.array[1][0]&&1==t.array[1][1]?t.array[1][2]:0,1e10<=(h=t.array[0][2])&&++a,10<=h&&++a,t.array[0][2]=a,2<=t.array.length&&0==t.array[1][0]&&1==t.array[1][1]&&t.array.splice(1,1),o=t.getOperatorIndex([0,2]),Number.isInteger(o)?t.array[o][2]+=i:t.array.splice(Math.ceil(o),0,[0,2,i])):(a=t.operator([u[0],u[1]-1]),10<=(h=t.operator([u[0],u[1]-2]))&&++a,o=t.getOperatorIndex(u),t.array.splice(1,Math.ceil(o)-1),t.array[0][2]=a,Number.isInteger(o)?t.array[1][2]+=i:t.array.splice(1,0,[...u,i]))}for(a=r.split(/[Ee]/),h=[t.array[0][2],0],s=a.length-(i=1);0<=s;--s){h[0]<m&&0===h[1]?h[0]=Math.pow(10,i*h[0]):-1==i?(0===h[1]?h[0]=Math.pow(10,i*h[0]):1==h[1]&&h[0]<=Math.log10(Number.MAX_VALUE)?h[0]=Math.pow(10,i*Math.pow(10,h[0])):h[0]=0,h[1]=0):h[1]++;var f=a[s].indexOf("."),f=-1==f?a[s].length:f;0===h[1]?17<=f?(h[0]=Math.log10(h[0])+c(a[s].substring(0,f)),h[1]=1):a[s]&&(h[0]*=Number(a[s])):(o=17<=f?c(a[s].substring(0,f)):a[s]?Math.log10(Number(a[s])):0,1==h[1]?h[0]+=o:2==h[1]&&h[0]<m+Math.log10(o)&&(h[0]+=Math.log10(1+Math.pow(10,Math.log10(o)-h[0])))),h[0]<m&&h[1]?(h[0]=Math.pow(10,h[0]),h[1]--):h[0]>p&&(h[0]=Math.log10(h[0]),h[1]++)}t.array[0][2]=h[0],h[1]&&(2<=t.array.length&&0==t.array[1][0]&&1==t.array[1][1]?t.array[1][2]+=h[1]:t.array.splice(1,0,[0,1,h[1]]))}l&&(t.sign*=-1),t.normalize()}else console.warn(y+"Malformed input: "+e),t.array=[[0,0,NaN]];return t},s.fromArray=function(r,e,t,n=0){var a,i;if(!(r instanceof Array)||void 0!==e&&"number"!=typeof e||void 0!==t&&"number"!=typeof t)if("number"==typeof r&&e instanceof Array&&(void 0===t||"number"==typeof t))a=e,i=r,0;else{if(!("number"==typeof r&&"number"==typeof e&&t instanceof Array))throw Error(E+"Expected an Array [and 1 or 2 Number]");a=t,i=r,0}else a=r,i=e,0;var o,s=new g;if(a.length)if("number"==typeof a[0])for(s.array=[],o=0;o<a.length;o++){if("number"!=typeof a[o])throw Error(E+"Expected Array of Number");s.array.push([0,o,a[o]])}else if(a[0]instanceof Array&&2==a[0].length){for(s.array=[],o=0;o<a.length;o++){if(2!=a[o].length)throw Error(E+"Expected Array of 2 Numbers");if(!(a[o]instanceof Array)||"number"!=typeof a[o][0]||"number"!=typeof a[o][1])throw Error(E+"Expected Array of 2 Numbers");s.array.push([0,a[o][0],a[o][1]])}s.operator([1,0],t)}else{if(!(a[0]instanceof Array&&3==a[0].length))throw Error(E+"Expected Array of Number or Array of 2 or 3 Numbers in Array");for(s.array=[],o=0;o<a.length;o++){if(3!=a[o].length)throw Error(E+"Expected Array of 3 Numbers");if(!(a[o]instanceof Array)||"number"!=typeof a[o][0]||"number"!=typeof a[o][1]||"number"!=typeof a[o][2])throw Error(E+"Expected Array of 3 Numbers");s.array.push([a[o][0],a[o][1],a[o][2]])}s.layer=t}else s.array=[[0,0,0]];return s.sign=i?Number(i):1,s.normalize(),s},s.fromObject=function(r){if("object"!=typeof r)throw Error(E+"Expected Object");if(null===r)return g.ZERO.clone();if(r instanceof Array)return g.fromArray(r);if(r instanceof g)return new g(r);if(!(r.array instanceof Array))throw Error(E+"Expected that property 'array' exists");if(void 0!==r.sign&&"number"!=typeof r.sign)throw Error(E+"Expected that property 'sign' is Number");if(void 0!==r.layer&&"number"!=typeof r.layer)throw Error(E+"Expected that property 'layer' is Number");return g.fromArray(r.array,r.sign,r.layer,r.constructor.name)},s.fromJSON=function(r){if("object"==typeof r)return g.fromObject(e);if("string"!=typeof r)throw Error(E+"Expected String");var e;try{e=JSON.parse(r)}catch(r){throw e=null,r}finally{r=g.fromObject(e)}return e=null,r},o.getOperatorIndex=function(t){for(var r=this.array,e=0,n=r.length-1;e!=n;){if(r[e].slice(0,2).map((r,e)=>t[e]==r).reduce((r,e)=>r&&e))return e;if(r[n].slice(0,2).map((r,e)=>t[e]==r).reduce((r,e)=>r&&e))return n;var a=Math.floor((e+n)/2);if(e==a||r[a].slice(0,2).map((r,e)=>t[e]==r).reduce((r,e)=>r&&e)){e=a;break}(r[a][0]<t[0]||t[0]==r[a][0]&&r[a][1]<t[1])&&(e=a),(r[a][0]>t[0]||t[0]==r[a][0]&&r[a][1]>t[1])&&(n=a)}return r[e][1]==t[1]&&r[e][0]==t[0]?e:e+.5},o.getOperator=function(r){var e=this.getOperatorIndex(r);return Number.isInteger(e)?this.array[e][2]:0===r[0]&&0===r[1]?10:0},o.setOperator=function(e,r){var t=this.getOperatorIndex(e);if(Number.isInteger(t))this.array[t][2]=r;else{t=Math.ceil(t);try{this.array.splice(t,0,[...e,r])}catch(r){throw e}}this.normalize()},o.operator=function(r,e){if(void 0===e)return this.getOperator(r);this.setOperator(r,e)},o.clone=function(){for(var r=new g,e=[],t=0;t<this.array.length;++t)e.push([...this.array[t]]);return r.array=e,r.sign=this.sign,r.layer=this.layer,r},(g=function(r){for(var e in a)a.hasOwnProperty(e)&&(Object.defineProperty?Object.defineProperty(r,e,{configurable:!1,enumerable:!0,writable:!1,value:new g(a[e])}):r[e]=new g(a[e]));return r}(g=function r(e){var t,n,a,i;function l(r,e){var t=this;if(!(t instanceof l))return new l(r,e);t.constructor=l;var n,a,i=null;if("string"==typeof r&&("["==r[0]||"{"==r[0]))try{i=JSON.parse(r)}catch(r){}if("number"!=typeof r||e instanceof Array)if("bigint"==typeof r)o=l.fromBigInt(r);else if(i)o=l.fromObject(i);else if("string"==typeof r)o=l.fromString(r);else if(r instanceof Array||e instanceof Array)o=l.fromArray(r,e);else if(r instanceof l){for(var o=[],s=0;s<r.array.length;++s)o.push([r.array[s][0],r.array[s][1],r.array[s][2]]);n=r.sign,a=r.layer}else"object"==typeof r?o=l.fromObject(r):(o=[[0,0,NaN]],n=1,a=0);else o=l.fromNumber(r);return void 0===n?(t.array=o.array,t.sign=o.sign,t.layer=o.layer):(t.array=o,t.sign=n,t.layer=a),t}for(i in l.prototype=o,l.JSON=0,l.STRING=1,l.NONE=0,l.NORMAL=1,l.ALL=2,l.clone=r,l.config=l.set=f,s)s.hasOwnProperty(i)&&(l[i]=s[i]);if(e=void 0===e?{}:e)for(a=["maxOps","serializeMode","debug"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return l.config(e),l}(g))).default=g.MegotaNum=g,"function"==typeof define&&define.amd?define(function(){return g}):"undefined"!=typeof module&&module.exports?module.exports=g:(r=r||("undefined"!=typeof self&&self&&self.self==self?self:Function("return this")())).MegotaNum=g}(this);